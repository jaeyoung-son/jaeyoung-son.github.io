---
title: '배움 정리하기'
date: '2020-05-05T12:10:32.169Z'
template: 'post'
draft: false
slug: '/posts/learned_5-05/'
category: 'learn'
description: '배움 정리 하기'
tags:
  - 'learn'
---

## 그날그날 배운것들을 기록하자.

## 스크롤바 없애기

보통 웹에서 특정 설정을 해주지 않으면 내용물이 뷰포트 크기를 넘을떄 스크롤이 생긴다 세로로 넘으면 세로스크롤, 가로로 넘기면 가로스크롤이 생긴다. 때에따라서 이 스크롤바를 보여주고싶지 않을 떄가 있다.  
몇가지 css를 적용해주면 스크롤바를 숨길 수 있다.

```css
.box {
  -ms-overflow-style: none; /* IE 와 Edge */
  scrollbar-width: none; /* firefox */
}

.box::-webkit-scrollbar {
  display: none; /* chrome, safari, opera */
}
```

브라우저별 셋팅이 조금씩 다르니 참고해야한다.

## 스크롤 이벤트시 쓰로틀 적용

스크롤이벤트를 적용하면 사용자가 스크롤을 할때마다 감지되고 실행이 된다. 단순 콘솔로그만 찍어도 콘솔이 어마어마하게 많이 실행되는것을 알 수 있다. 스크롤 감지 자체가 큰 부담이 아니라고는 하지만 나름 줄여줄 수 있으면 깔끔하게 적용해보려고 하였다.  
보통 throttle과 debounce를 이용하여 시간이 지남에 따라 함수를 몇번 실행할지 제어하는데 두개는 차이를 가지고있다.

### 디바운스

디바운스는 그룹화하여 특정시간이 지난 후 하나의 이벤트만 발생하도록 하는 것 즉, 순차적 호출을 하나의 그룹으로 그룹화 한다. 연이어 호출되는 함수중 가장 마지막이나 가장 처음만 호출하도록 하는것.

### 쓰로틀

쓰로틀은 이벤트를 일정한 주기마다 발생하도록 하는것 쓰로틀에 설정시간으로 1s를 주면 해당 이벤트는 1s동안은 한번만 실행된다.  
쓰로틀을 적용해보기로하고 쓰로틀 함수를 정의해줬다

```js
export default function throttle(fn, delay) {
    let timer;
    return function () {
    if (!timer) {
    timer = setTimeout (function () {
        timer = null;
        fn.apply(this, arguments);
        },delay)
    }
}
```

쓰로틀 이라는 함수에서 인자로 함수와 딜레이시간을 받는다. 그리고 타이머 변수를 하나 선언하고 쓰로틀 함수는 함수를 리턴하는데 그 함수는 타이머를 !timer 조건이 맞을 때 타이머를 setTimeout으로 함수를 넣어주고 그 함수 내부에서 timer = null이며 쓰로틀함수에서 인자로 받은 함수를 apply로 호출하고 셋타임아웃의 딜레이시간은 쓰로틀 함수에서 인자로 받은 시간이다. apply호출 같은경우 this를 공부할때 this를 어떻게 적용시킬지 호출단계에서 정해주는 느낌으로 받아들였는데 완전히 이해하지 않았다. 이렇게 쓰로틀 함수를 뺴놓고 사용할곳에서 import 해주고 사용한다

```jsx
import throttle from '../throttle'

const scrollEvent = ....

window.addEventListener('scroll', throttle(scrollEvent, 1000))
// 스크롤 이벤트를 scrollEvent라는 함수를 걸어주고 그 함수는 1초마다 한번 실행

```

이렇게 하면 콘솔을 찍어도 전처럼 마구마구 찍히지 않는것을 확인할 수 있다.

## 웹팩 빌드 시 dist폴더에서 디렉토리 적용

웹팩 빌드를 할 때 dist폴더에 js파일과 css파일을 빌드하는데 js파일은 js디렉토리에 들어간다음 그안에서 빌드가 되었는데 css파일은 바로 dist폴더에서 빌드가 되었다.

```
- dist
-- a.css
-- b.css
-- js
--- a.js
--- b. js
```

기존의 세팅

```js
{
loader: MiniCssExtractPlugin.loader,
options: {
    publickPath: '/app/dist/css/'
}
... 나머지 css로더들

plugins: [
new MiniCssExtractPlugin({
filename: '[name].css'
})
]
}
```

일단 셋팅에서 엔트리포인트가 한개가 아닌 두개여서 헷갈리는 부분이 많았고 아웃풋 셋팅에서 js파일들은 잘 js디렉토리를 바라보고 있길래 잘 들어갈줄알았지만 그러지 않았다. 그러다가 아웃풋에서 js 파일들을 어떻게 뱉는지 보았더니

```js
output: {
filename: 'js/[name].bundle.js'
...
}
```

파일네임 앞에 js/ 가 있고 그리고 js디렉토리 안에 빌드가 되었다 혹시나 MiniCssExtractPlugin에서도 적용을 시키면 잘될까 확인을 해보았다.  
세팅 후

```
{
loader: MiniCssExtractPlugin.loader,
options: {
    publickPath: '/app/dist/css/'
}
... 나머지 css로더들

plugins: [
new MiniCssExtractPlugin({
filename: 'css/[name].css'
})
]
```

그러니 이제 css파일들이 dist/css/a.css 이렇게 css디렉토리에 들어간것을 확인할 수 있었다,
