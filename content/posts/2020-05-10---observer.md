---
title: 'Intersection Observer'
date: '2020-05-10T12:10:32.169Z'
template: 'post'
draft: false
slug: '/posts/intersectionObserver/'
category: 'observer'
description: '교차관찰자에 관하여'
tags:
  - 'observer'
---

## Intersection Observer

### 인터섹션 옵저버. 교차관찰자 정리

인터섹션 옵저버란 한마디로 타겟으로 삼은 요소가 화면에 노출되었는지 여부를 간단하게 구독할 수 있는 API이다. 스크롤 이벤트로 이를 구현하려면 scroll이 일어날때마다, 그 요소가 존재하는지 매번 계산해야하는데 intersection observer를 사용하면 성능향상을 누릴 수 있다.  
MDN에서는 인터섹션옵저버의 필요성을 다음과 같은 예를들어 설명하고 있다.

1. 페이지 스크롤 시 이미지를 lazy-load할 때
2. 무한스크롤을 통해 스크롤할 때 새로운 컨텐츠를 불러올 때
3. 광고의 수익을 계산하기 위해 광고의 가시성을 참고할 때
4. 사용자가 결과를 볼 것인지에 따라 애니메이션 동작여부를 결정할 때

3번의 예시와 비슷한 내용이 필요했는데 예제없이 내용을 이해하기는 힘들었고, 보통 주로 사용되는 예제들이 1번이나 2번뿐이었다. 그래서 이 인터섹션옵저버가 많이 괴롭혔고, 지금도 괴롭히고있고 앞으로 게속 내용을 보충하며 채워야겠다.  
new IntersectionObserver()를 통해 인스턴스화 하여 관찰자를 초기화 하고 대상을 지정한다. 생성자는 2개의 인수 콜백함수와 옵션을 받는다.

```js
const io = new IntersectionObserver(callback, options);
io.observe(element);
```

### callback

관찰할 대상이 등록되거나 가시성에 변화가 생기면 콜백을 실행한다. 콜백은 2개의 인자 entires, observer 를 받는다

```js
const io = new IntersectionObserver((entries, observer) => {}, options);
```

#### entries

entries는 intersectionObserverEntry 인스턴스의 배열이다. 엔트리는 읽기전용의 속성들을 포함한다.

1. boundingClientRect
2. intersectionRect
3. intersectionRatio
4. isIntersecting
5. rootBounds
6. target
7. time
