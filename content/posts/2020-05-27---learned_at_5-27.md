---
title: '배움 정리하기'
date: '2020-05-278T12:10:32.169Z'
template: 'post'
draft: false
slug: '/posts/learned_5-27/'
category: 'learn'
description: '배움 정리 하기'
tags:
  - 'learn'
---

## 그날그날 배운것들을 기록하자.

## ref관련

리액트에서 dom에 직접접근을 하려고 할땐 ref를 사용해서 접근을 한다. map으로 요소들을 배열로 반환하면서 ref를 줄 상황이 생겨서 ref를 적용해보았다.

```jsx
const Component = () => {
  const [data, setData] = useState([]);
  const ref = useRef();

  return data.map(el => (
    <div>
      <input ref={ref} />
    </div>
  ));
};
```

처음에는 위와 같이 적용을 했었는데 위와같이 적용을 하게되면 결국에 하나의 요소만 ref에 담기더라 지금 생각해보면 당연한것같기도 하다.  
ref는 다뤄볼 일이 없어서 익숙치도 않고, 이것저것 시도해보려고 알아보며 다른 방법도 시도해보았다.

```jsx
const Component = () => {
  const [data, setData] = useState([]);
  const [target, setTarget] = useState(null);

  return data.map(el => (
    <div>
      <input ref={setTarget} />
    </div>
  ));
};
```

이렇게 셋상태함수를 붙어주면 ref 요소를 callback으로서 사용한다고 하는데 Ref가 붙었을 때, 떼어졌을 때 무언가 업데이트 할 수 있는 방법을 리액트에서 제시하려고 만들었다고 한다. 적용 해보니 역시나
결과는 같았다. 여기에서 포기하지 않고 마법을 부려본다면 다음과 같다.

```jsx
const Componenet = () => {
  const [data, setData] = useState([1, 2]);
  let refs = useRef([React.createRef(), React.createRef()]);

  return data.map((el, index) => (
    <div>
      <input ref={refs.current[index]} />
    </div>
  ));
};
```

기가막힌 코드가 완성되었다 refs값을 확인해보면 ref값들이 배열에 담겨져 있다. 이것을 조금 더 활용해본다면 다음과 같은 방법이 있다.

```jsx
const Componenet = () => {
  const [data, setData] = useState([]);

  useEffect(() => {
    // data 요청
  }, []);

  let refs = useRef(data.map(React.createRef));

  return data.map((el, index) => (
    <div>
      <input ref={refs.current[index]} />
    </div>
  ));
};
```

map함수는 배열을 반환하기에 데이타 수만큼 미리 ref가 담긴 배열을 만들어준다. 이렇게 활용할 수 있다. 멋진 코드가 완성이 되었다. 이러한 방법을 이곳저곳에 잘 활용해야겠다.

## 타입스크립트 모듈 import 관련

항상 ts파일에서 모듈을 불러오면 에러가 몇가지가 있었는데 왠만한건 다 해결했나 싶더니 아직도 에러를 불러오는 모듈이 있었다.
라이브러리 사용중

```jsx
import library from 'library';
```

임포트헤서 불러오는데 모듈을 찾을 수 없다고 나온다. 그래서 @types 타입스크립트 버전이 있는지 봤는데 없는 라이브러리 였다.
일단 require로 땡겨와서 해결하는 방법도 있다. 그리고 새롭게 찾은 방법은 다음과 같다.  
declaration.d.ts

```ts
declare module 'library-name';
```

이렇게 타입스크립트 선언파일에서 선언을 해주면 모듈을 찾지 못한다는 에러를 잡을 수 있다.

## 개발모드인지 상용모드인지 체크

특정 컴포넌트에서 현재 개발모드인지 상용모드인지 체크하려면 어떻게 해야할까? 궁금증이 생겨서 알아보게 되었다. 뭔가 적용을 해야할거같아서 알아보기 시작했는데, 결국 직접 적용해 보진 않고 다른 방법을 시도했기에 나중에 원활히 작동이 되는지 확인은 하지 못하였지만. 값체크는 했기에 정리를 해본다. 특정 컴포넌트에서

```jsx
const Componenet = () => {
  function ReactIsInDevelomentMode() {
    return '_self' in React.createElement('div');
  }

  console.log(ReactIsInDevelomentMode());
};
```

위와 같은 함수를 작성했을때 development모드에서 React element는 \_self라는 속성을 가지고 정의한다고 한다. production모드에서는 해당 속성이 정의되지 않는다고한다. 그래서 콘솔로 확인을 해보면 개발모드일때 true값이 나오는것을 확인할 수 있다. 따라서 그 값을 체크해서 활용하면 될 것 같다. 적용할 일이 생길때 한번 적용을 해보아야겠다.
